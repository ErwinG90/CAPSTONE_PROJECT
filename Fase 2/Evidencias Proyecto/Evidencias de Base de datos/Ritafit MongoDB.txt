{
  $jsonSchema: {
    bsonType: 'object',
    title: 'Esquema de Documento Ruta',
    required: [
      'id_creador',
      'nombre_ruta',
      'recorrido'
    ],
    properties: {
      _id: {
        bsonType: 'objectId'
      },
      id_creador: {
        bsonType: 'objectId',
        description: 'Referencia al usuario creador.'
      },
      nombre_ruta: {
        bsonType: 'string'
      },
      descripcion: {
        bsonType: 'string'
      },
      nivel_dificultad: {
        bsonType: 'string'
      },
      distancia_km: {
        bsonType: 'number'
      },
      fecha_creacion: {
        bsonType: 'date'
      },
      promedio_valoracion: {
        bsonType: 'number'
      },
      recorrido: {
        bsonType: 'object',
        description: 'Debe ser un objeto GeoJSON LineString.',
        required: [
          'type',
          'coordinates'
        ],
        properties: {
          type: {
            'enum': [
              'LineString'
            ]
          },
          coordinates: {
            bsonType: 'array',
            description: 'Array de [Longitud, Latitud]',
            items: {
              bsonType: 'array',
              minItems: 2,
              maxItems: 2
            }
          }
        }
      },
      valoraciones: {
        bsonType: 'array',
        items: {
          bsonType: 'object',
          required: [
            'id_usuario',
            'puntuacion',
            'fecha'
          ],
          properties: {
            id_usuario: {
              bsonType: 'objectId'
            },
            puntuacion: {
              bsonType: 'number',
              minimum: 1,
              maximum: 5
            },
            comentario: {
              bsonType: 'string'
            },
            fecha: {
              bsonType: 'date'
            }
          }
        }
      }
    }
  }
}